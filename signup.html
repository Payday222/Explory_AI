<!DOCTYPE html>
<head>
    <title>Sign Up</title>
</head>

<body>
    <form id = "signUp">
        <label for="email">Email:</label>
        <input type="text" id="email" name="Email"><br><br>
        <label for="password">Password</label>
        <input type="text" id="password" name="Password"><br><br>
        <label for="conf-password">Confirm Password</label>
        <input type="text" id="conf-password" name="Conf-Password"><br><br>
    </form>
    <p id="result"></p>
    <p id="email-result"></p>
    <script>
        const nodemailer = require('nodemailer')
        const inputElement = document.getElementById('email');
        let password = document.getElementById('password');
        let password1 = document.getElementById('conf-password')
        let result = document.getElementById('result')
        let emailResult = document.getElementById('email-result')
        
        // Function to check if the input contains the '@' character
        function checkForCharacter() {
            const inputValue = inputElement.value;
            if (inputValue.includes('@')) {
                emailResult.textContent = "Valid email"
                emailResult.style.color = "green"

            } else {
                emailResult.textContent = "Invalid email"
                emailResult.style.color = "red"

            }
        }

        function ComparePass() {
            const pass = password.value;
            const pass1 = password1.value
            if(pass != 0 && pass1 != 0) {
                if(pass1 === pass) {
                    result.textContent = "Passwords Match"
                    result.style.color = "green"

                } else {
                    result.textContent = "Passwords do not match"
                    result.style.color = "red"

                }
            }
        }

        password.addEventListener('input', ComparePass);
        password1.addEventListener('input', ComparePass);
        email.addEventListener('input', checkForCharacter);

        function sendEmail(to, subject, text) {
            const transporter = nodemailer.createTransport({
            service: 'gmail',
            auth: {
                user: 'our_mail@gmail.com',
                pass: 'pass'
            }
        });
            const mailOptions = {
                from: 'our_mail@gmail.com',
                to: to,
                subject: subject,
                text: text
            };

            transporter.sendMail(mailOptions, (error, info) => {
                if(error) {
                    return console.log(error);
                }
                console.log('mail sent: %s', info.messageId);
            });    
        }
    </script>
</body>